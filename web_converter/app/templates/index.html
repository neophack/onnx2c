<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-i18n="page_title">ONNX to C Converter</title>
    <style>
        /* Apple-inspired styling */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Roboto, 'Helvetica Neue', sans-serif;
            background: radial-gradient(circle at center, #1a1f35 0%, #0a0e17 100%);
            color: #e0e6ed;
            min-height: 100vh;
            line-height: 1.6;
        }

        .container {
            max-width: 1300px;
            margin: 0 auto;
            padding: 20px;
        }

        .hero {
            text-align: center;
            padding: 40px 0;
            color: #00f2ff;
        }

        .hero h1 {
            font-size: 3.5rem;
            font-weight: 800;
            margin-bottom: 20px;
            text-shadow: 0 0 20px rgba(0, 242, 255, 0.5);
            letter-spacing: 2px;
            text-transform: uppercase;
        }

        .hero p {
            font-size: 1.2rem;
            margin-bottom: 20px;
            opacity: 0.8;
            max-width: 700px;
            margin-left: auto;
            margin-right: auto;
            color: #aab4be;
        }

        .card {
            background: rgba(16, 22, 35, 0.8);
            backdrop-filter: blur(20px);
            border-radius: 24px;
            padding: 40px;
            box-shadow: 0 0 40px rgba(0, 0, 0, 0.5), inset 0 0 2px rgba(0, 242, 255, 0.2);
            margin-bottom: 30px;
            border: 1px solid rgba(0, 242, 255, 0.1);
        }

        .examples-container {
            display: flex;
            justify-content: space-between;
            gap: 15px;
            margin-bottom: 30px;
            overflow-x: auto;
            padding-bottom: 10px;
        }

        .example-item {
            flex: 1;
            min-width: 200px;
            background: rgba(30, 41, 59, 0.5);
            padding: 20px 15px;
            border-radius: 16px;
            border: 1px solid rgba(0, 242, 255, 0.1);
            text-align: center;
            transition: all 0.3s ease;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .example-item:hover {
            background: rgba(30, 41, 59, 0.8);
            border-color: #00f2ff;
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 242, 255, 0.1);
        }

        .example-item h4 {
            color: #00f2ff;
            margin-bottom: 10px;
            font-size: 1.1rem;
        }

        .example-item p {
            font-size: 0.85rem;
            color: #94a3b8;
            margin-bottom: 15px;
        }

        .upload-zone {
            border: 2px dashed rgba(0, 242, 255, 0.3);
            border-radius: 20px;
            padding: 60px 20px;
            text-align: center;
            background: rgba(15, 23, 42, 0.6);
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
        }

        .upload-zone:hover {
            background: rgba(15, 23, 42, 0.8);
            border-color: #00f2ff;
            transform: scale(1.01);
        }

        .upload-zone.dragover {
            background: rgba(0, 242, 255, 0.1);
            border-color: #00f2ff;
        }

        .upload-icon {
            width: 80px;
            height: 80px;
            margin: 0 auto 20px;
            background: linear-gradient(135deg, #00f2ff, #007AFF);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 2.5rem;
            box-shadow: 0 0 20px rgba(0, 242, 255, 0.4);
        }

        .upload-text {
            font-size: 1.2rem;
            color: #e0e6ed;
            margin-bottom: 10px;
        }

        .upload-hint {
            color: #94a3b8;
            font-size: 0.9rem;
        }

        #fileInput {
            display: none;
        }

        .btn {
            background: linear-gradient(135deg, #00f2ff, #007AFF);
            color: #0a0e17;
            border: none;
            border-radius: 10px;
            padding: 12px 24px;
            font-size: 0.95rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
            margin: 5px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 0 15px rgba(0, 242, 255, 0.5);
            filter: brightness(1.1);
        }

        .btn-success {
            background: linear-gradient(135deg, #00f2ff, #007AFF);
        }

        .btn-secondary {
            background: transparent;
            border: 1px solid rgba(0, 242, 255, 0.5);
            color: #00f2ff;
        }

        .btn-secondary:hover {
            background: rgba(0, 242, 255, 0.1);
        }

        .progress {
            width: 100%;
            height: 10px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 5px;
            overflow: hidden;
            margin: 25px 0;
            display: none;
            border: 1px solid rgba(0, 242, 255, 0.1);
        }

        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #00f2ff, #007AFF, #00f2ff);
            background-size: 200% 100%;
            width: 0;
            transition: width 0.3s ease;
            animation: glow 2s linear infinite;
        }

        @keyframes glow {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }

        .results {
            display: none;
            margin-top: 40px;
            padding: 30px;
            background: rgba(30, 41, 59, 0.3);
            border-radius: 20px;
            border: 1px solid rgba(0, 242, 255, 0.1);
        }

        .metric {
            background: rgba(15, 23, 42, 0.4);
            border: 1px solid rgba(0, 242, 255, 0.05);
            border-radius: 12px;
            padding: 15px 25px;
            margin-bottom: 12px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.3s ease;
        }

        .metric:hover {
            background: rgba(15, 23, 42, 0.6);
            border-color: rgba(0, 242, 255, 0.2);
        }

        .metric-label {
            font-weight: 500;
            color: #94a3b8;
        }

        .metric-value {
            font-family: 'Fira Code', 'SF Mono', Monaco, monospace;
            font-size: 1.1rem;
            color: #00f2ff;
            font-weight: 600;
            text-shadow: 0 0 10px rgba(0, 242, 255, 0.3);
        }

        .status {
            padding: 15px;
            border-radius: 12px;
            margin: 15px 0;
            font-weight: 500;
            display: none;
        }

        .status.success {
            background: rgba(0, 242, 255, 0.1);
            color: #00f2ff;
            border: 1px solid rgba(0, 242, 255, 0.2);
        }

        .status.error {
            background: rgba(255, 77, 77, 0.1);
            color: #ff4d4d;
            border: 1px solid rgba(255, 77, 77, 0.2);
        }

        .status.info {
            background: rgba(0, 122, 255, 0.1);
            color: #007AFF;
            border: 1px solid rgba(0, 122, 255, 0.2);
        }

        .file-info {
            background: rgba(30, 41, 59, 0.3);
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
            border: 1px solid rgba(0, 242, 255, 0.1);
        }

        .file-name {
            font-weight: 600;
            color: #00f2ff;
            margin-bottom: 5px;
        }

        .file-details {
            color: #94a3b8;
            font-size: 0.9rem;
        }

        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 2px solid rgba(0, 242, 255, 0.1);
            border-top: 2px solid #00f2ff;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-right: 10px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .logs-container {
            margin-top: 30px;
            display: none;
            border: 1px solid rgba(0, 242, 255, 0.1);
            border-radius: 12px;
            overflow: hidden;
        }

        .logs-header {
            background: rgba(15, 23, 42, 0.9);
            color: #00f2ff;
            padding: 15px 20px;
            font-weight: 600;
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
            border-bottom: 1px solid rgba(0, 242, 255, 0.1);
        }

        .logs-content {
            background: #0a0e17;
            color: #94a3b8;
            font-family: 'Fira Code', 'Consolas', monospace;
            font-size: 0.85rem;
            max-height: 300px;
            overflow-y: auto;
            padding: 10px 0;
        }

        .log-line {
            padding: 4px 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.02);
        }

        .log-line.success { color: #00f2ff; }

        .log-line.error { color: #ff4d4d; }

        .log-line.info { color: #007AFF; }

        .log-line.warning { color: #ffaa00; }

        .footer {
            text-align: center;
            padding: 40px 0;
            color: #64748b;
            font-size: 0.9rem;
        }

        .lang-switcher {
            position: fixed;
            top: 20px;
            right: 20px;
            display: flex;
            gap: 10px;
            z-index: 1000;
        }

        .lang-btn {
            background: rgba(10, 14, 23, 0.8);
            border: 1px solid rgba(0, 242, 255, 0.5);
            color: #00f2ff;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
            backdrop-filter: blur(10px);
        }

        .lang-btn:hover {
            background: rgba(0, 242, 255, 0.1);
            transform: translateY(-2px);
            box-shadow: 0 0 15px rgba(0, 242, 255, 0.3);
        }

        .lang-btn.active {
            background: #00f2ff;
            color: #0a0e17;
            box-shadow: 0 0 15px rgba(0, 242, 255, 0.5);
        }

        @media (max-width: 768px) {
            .hero h1 {
                font-size: 2.5rem;
            }
            
            .hero p {
                font-size: 1.1rem;
            }
            
            .card {
                padding: 25px;
                margin: 10px;
            }
            
            .upload-zone {
                padding: 40px 15px;
            }

            .lang-switcher {
                top: 10px;
                right: 10px;
            }

            .lang-btn {
                padding: 6px 12px;
                font-size: 0.8rem;
            }
        }
    </style>
</head>
<body>
    <div class="lang-switcher">
        <button class="lang-btn active" data-lang="en">English</button>
        <button class="lang-btn" data-lang="zh">‰∏≠Êñá</button>
    </div>
    <div class="container">
        <div class="hero">
            <h1 data-i18n="hero_title">ONNX to C Converter</h1>
            <p data-i18n="hero_subtitle">Transform your neural networks into optimized C code for embedded systems and microcontrollers</p>
        </div>

        <div class="card">
            <h3 style="margin-bottom: 20px; color: #00f2ff;" data-i18n="examples_title">PyTorch Training Examples</h3>
            <p style="margin-bottom: 20px; color: #94a3b8;" data-i18n="examples_subtitle">Download these examples to train and export your own models to ONNX</p>
            <div class="examples-container">
                <div class="example-item">
                    <h4>MLP Model</h4>
                    <p data-i18n="mlp_desc">Multi-Layer Perceptron for classification</p>
                    <div style="display: flex; gap: 5px; justify-content: center;">
                        <a href="/download_example/mlp_example.py" class="btn btn-secondary" style="margin: 0; padding: 8px 12px; font-size: 0.8rem;" data-i18n="download_script">Download Script</a>
                        <a href="/download_example/mlp_model.onnx" class="btn btn-success" style="margin: 0; padding: 8px 12px; font-size: 0.8rem;" data-i18n="download_onnx">Download ONNX</a>
                    </div>
                </div>
                <div class="example-item">
                    <h4>CNN Model</h4>
                    <p data-i18n="cnn_desc">Convolutional Neural Network for images</p>
                    <div style="display: flex; gap: 5px; justify-content: center;">
                        <a href="/download_example/cnn_example.py" class="btn btn-secondary" style="margin: 0; padding: 8px 12px; font-size: 0.8rem;" data-i18n="download_script">Download Script</a>
                        <a href="/download_example/cnn_model.onnx" class="btn btn-success" style="margin: 0; padding: 8px 12px; font-size: 0.8rem;" data-i18n="download_onnx">Download ONNX</a>
                    </div>
                </div>
                <div class="example-item">
                    <h4>CNN1D Model</h4>
                    <p data-i18n="cnn1d_desc">1D Convolutional Neural Network for time series</p>
                    <div style="display: flex; gap: 5px; justify-content: center;">
                        <a href="/download_example/cnn1d_example.py" class="btn btn-secondary" style="margin: 0; padding: 8px 12px; font-size: 0.8rem;" data-i18n="download_script">Download Script</a>
                        <a href="/download_example/cnn1d_model.onnx" class="btn btn-success" style="margin: 0; padding: 8px 12px; font-size: 0.8rem;" data-i18n="download_onnx">Download ONNX</a>
                    </div>
                </div>
                <div class="example-item">
                    <h4>LSTM Model</h4>
                    <p data-i18n="lstm_desc">Long Short-Term Memory for sequences</p>
                    <div style="display: flex; gap: 5px; justify-content: center;">
                        <a href="/download_example/lstm_example.py" class="btn btn-secondary" style="margin: 0; padding: 8px 12px; font-size: 0.8rem;" data-i18n="download_script">Download Script</a>
                        <a href="/download_example/lstm_model.onnx" class="btn btn-success" style="margin: 0; padding: 8px 12px; font-size: 0.8rem;" data-i18n="download_onnx">Download ONNX</a>
                    </div>
                </div>
                <div class="example-item">
                    <h4>LSTM with H/C</h4>
                    <p data-i18n="lstm_hc_desc">LSTM with initial hidden and cell states</p>
                    <div style="display: flex; gap: 5px; justify-content: center;">
                        <a href="/download_example/lstm_with_hc_example.py" class="btn btn-secondary" style="margin: 0; padding: 8px 12px; font-size: 0.8rem;" data-i18n="download_script">Download Script</a>
                        <a href="/download_example/lstm_with_hc.onnx" class="btn btn-success" style="margin: 0; padding: 8px 12px; font-size: 0.8rem;" data-i18n="download_onnx">Download ONNX</a>
                    </div>
                </div>
            </div>
            <hr style="margin: 30px 0; border: 0; border-top: 1px solid rgba(0, 242, 255, 0.1);">
            <div class="upload-zone" id="uploadZone">
                <div class="upload-icon">üìÅ</div>
                <div class="upload-text" data-i18n="upload_text">Drop your ONNX file here or click to browse</div>
                <div class="upload-hint" data-i18n="upload_hint">Supports .onnx files up to 100MB</div>
                <input type="file" id="fileInput" accept=".onnx" />
            </div>

            <div class="progress" id="progressBar">
                <div class="progress-bar"></div>
            </div>

            <div class="status" id="status"></div>

            <div class="logs-container" id="logsContainer">
                <div class="logs-header" id="logsHeader">
                    <span data-i18n="logs_title">üîç Execution Logs</span>
                    <span class="logs-toggle" id="logsToggle">‚ñº</span>
                </div>
                <div class="logs-content" id="logsContent"></div>
            </div>

            <div class="file-info" id="fileInfo" style="display: none;">
                <div class="file-name" id="fileName"></div>
                <div class="file-details" id="fileDetails"></div>
            </div>

            <div class="results" id="results">
                <h3 style="margin-bottom: 20px; color: #00f2ff;" data-i18n="results_title">Model Validation Results</h3>
                
                <div class="metric">
                    <span class="metric-label" data-i18n="avg_rel_error">Average Relative Error:</span>
                    <span class="metric-value" id="avgRelError">-</span>
                </div>
                
                <div class="metric">
                    <span class="metric-label" data-i18n="max_rel_error">Maximum Relative Error:</span>
                    <span class="metric-value" id="maxRelError">-</span>
                </div>
                
                <div class="metric">
                    <span class="metric-label" data-i18n="mae">Mean Absolute Error (MAE):</span>
                    <span class="metric-value" id="mae">-</span>
                </div>
                
                <div class="metric">
                    <span class="metric-label" data-i18n="max_abs_error">Maximum Absolute Error:</span>
                    <span class="metric-value" id="maxAbsError">-</span>
                </div>
                
                <div class="metric">
                    <span class="metric-label" data-i18n="mse">Mean Squared Error (MSE):</span>
                    <span class="metric-value" id="mse">-</span>
                </div>
                
                <div class="metric">
                    <span class="metric-label" data-i18n="num_samples">Number of Samples:</span>
                    <span class="metric-value" id="numSamples">-</span>
                </div>

                <div style="text-align: center; margin-top: 30px;">
                    <a href="#" id="downloadBtn" class="btn btn-success" style="display: none;" data-i18n="download_c_file">
                        üì• Download Generated C File
                    </a>
                    <a href="#" id="downloadMainBtn" class="btn btn-secondary" style="display: none;" data-i18n="download_main_file">
                        üìÑ Download Main File
                    </a>
                    <a href="#" id="downloadExeBtn" class="btn btn-secondary" style="display: none;" data-i18n="download_executable">
                        ‚öôÔ∏è Download Executable
                    </a>
                </div>
            </div>
        </div>

        <div class="footer">
            <p data-i18n="footer_text">Built with ‚ù§Ô∏è using onnx2c - Optimized neural networks for embedded systems</p>
        </div>
    </div>

    <script>
        // ==================== i18n Configuration ====================
        const translations = {
            en: {
                page_title: 'ONNX to C Converter',
                hero_title: 'ONNX to C Converter',
                hero_subtitle: 'Transform your neural networks into optimized C code for embedded systems and microcontrollers',
                upload_text: 'Drop your ONNX file here or click to browse',
                upload_hint: 'Supports .onnx files up to 100MB',
                logs_title: 'üîç Execution Logs',
                results_title: 'Model Validation Results',
                avg_rel_error: 'Average Relative Error:',
                max_rel_error: 'Maximum Relative Error:',
                mae: 'Mean Absolute Error (MAE):',
                max_abs_error: 'Maximum Absolute Error:',
                mse: 'Mean Squared Error (MSE):',
                num_samples: 'Number of Samples:',
                download_c_file: 'üì• Download Generated C File',
                download_main_file: 'üìÑ Download Main File',
                download_executable: '‚öôÔ∏è Download Executable',
                footer_text: 'Built with ‚ù§Ô∏è using onnx2c - Optimized neural networks for embedded systems',
                conversion_success: '‚úÖ Conversion completed successfully! The model has been validated and is ready for download.',
                conversion_failed: '‚ùå Conversion failed:',
                converting: '‚è≥ Converting model, please wait...',
                file_error: 'Please select a valid ONNX file',
                request_error: 'Request failed:',
                file_size_text: 'Size:',
                file_type_text: 'Type:',
                onnx_model: 'ONNX Model',
                view_report: 'üìä View Detailed Report',
                examples_title: 'PyTorch Training Examples',
                examples_subtitle: 'Download these examples to train and export your own models to ONNX',
                mlp_desc: 'Multi-Layer Perceptron for classification',
                cnn_desc: 'Convolutional Neural Network for images',
                cnn1d_desc: '1D Convolutional Neural Network for time series',
                lstm_desc: 'Long Short-Term Memory for sequences',
                lstm_hc_desc: 'LSTM with initial hidden and cell states',
                download_script: 'Download Script',
                download_onnx: 'Download ONNX'
            },
            zh: {
                page_title: 'ONNX to C ËΩ¨Êç¢Âô®',
                hero_title: 'ONNX to C ËΩ¨Êç¢Âô®',
                hero_subtitle: 'Â∞ÜÊÇ®ÁöÑÁ•ûÁªèÁΩëÁªúËΩ¨Êç¢‰∏∫‰ºòÂåñÁöÑ C ‰ª£Á†ÅÔºåÁî®‰∫éÂµåÂÖ•ÂºèÁ≥ªÁªüÂíåÂæÆÊéßÂà∂Âô®',
                upload_text: 'Â∞Ü ONNX Êñá‰ª∂ÊãñÊîæÂà∞Ê≠§Â§ÑÊàñÁÇπÂáªÊµèËßà',
                upload_hint: 'ÊîØÊåÅ .onnx Êñá‰ª∂ÔºåÊúÄÂ§ß 100MB',
                logs_title: 'üîç ÊâßË°åÊó•Âøó',
                results_title: 'Ê®°ÂûãÈ™åËØÅÁªìÊûú',
                avg_rel_error: 'Âπ≥ÂùáÁõ∏ÂØπËØØÂ∑Æ:',
                max_rel_error: 'ÊúÄÂ§ßÁõ∏ÂØπËØØÂ∑Æ:',
                mae: 'Âπ≥ÂùáÁªùÂØπËØØÂ∑Æ (MAE):',
                max_abs_error: 'ÊúÄÂ§ßÁªùÂØπËØØÂ∑Æ:',
                mse: 'ÂùáÊñπËØØÂ∑Æ (MSE):',
                num_samples: 'ÊµãËØïÊ†∑Êú¨Êï∞Èáè:',
                download_c_file: 'üì• ‰∏ãËΩΩÁîüÊàêÁöÑ C Êñá‰ª∂',
                download_main_file: 'üìÑ ‰∏ãËΩΩ Main Êñá‰ª∂',
                download_executable: '‚öôÔ∏è ‰∏ãËΩΩÂèØÊâßË°åÊñá‰ª∂',
                footer_text: '‰ΩøÁî® onnx2c ÊûÑÂª∫ ‚ù§Ô∏è - ‰∏∫ÂµåÂÖ•ÂºèÁ≥ªÁªü‰ºòÂåñÁöÑÁ•ûÁªèÁΩëÁªú',
                conversion_success: '‚úÖ ËΩ¨Êç¢ÊàêÂäüÂÆåÊàêÔºÅÊ®°ÂûãÂ∑≤È™åËØÅÂπ∂ÂèØ‰∏ãËΩΩ„ÄÇ',
                conversion_failed: '‚ùå ËΩ¨Êç¢Â§±Ë¥•:',
                converting: '‚è≥ Ê≠£Âú®ËΩ¨Êç¢Ê®°ÂûãÔºåËØ∑Á®çÂÄô...',
                file_error: 'ËØ∑ÈÄâÊã©‰∏Ä‰∏™ÊúâÊïàÁöÑ ONNX Êñá‰ª∂',
                request_error: 'ËØ∑Ê±ÇÂ§±Ë¥•:',
                file_size_text: 'Â§ßÂ∞è:',
                file_type_text: 'Á±ªÂûã:',
                onnx_model: 'ONNX Ê®°Âûã',
                view_report: 'üìä Êü•ÁúãËØ¶ÁªÜÊä•Âëä',
                examples_title: 'PyTorch ËÆ≠ÁªÉÁ§∫‰æã',
                examples_subtitle: '‰∏ãËΩΩËøô‰∫õÁ§∫‰æã‰ª£Á†ÅÔºåËá™Ë°åËÆ≠ÁªÉÊ®°ÂûãÂπ∂ÂØºÂá∫‰∏∫ ONNX',
                mlp_desc: 'Â§öÂ±ÇÊÑüÁü•Êú∫ÔºàÂÖ®ËøûÊé•ÁΩëÁªúÔºâÁî®‰∫éÂàÜÁ±ª',
                cnn_desc: 'Âç∑ÁßØÁ•ûÁªèÁΩëÁªúÁî®‰∫éÂõæÂÉèÂ§ÑÁêÜ',
                cnn1d_desc: '‰∏ÄÁª¥Âç∑ÁßØÁ•ûÁªèÁΩëÁªúÁî®‰∫éÊó∂Èó¥Â∫èÂàó',
                lstm_desc: 'ÈïøÁü≠ÊúüËÆ∞ÂøÜÁΩëÁªúÁî®‰∫éÂ∫èÂàóÊï∞ÊçÆ',
                lstm_hc_desc: 'Â∏¶ÊúâÂàùÂßãÈöêÁä∂ÊÄÅÂíåÁªÜËÉûÁä∂ÊÄÅÁöÑ LSTM',
                download_script: '‰∏ãËΩΩËÑöÊú¨',
                download_onnx: '‰∏ãËΩΩ ONNX'
            }
        };

        // ==================== Language Manager ====================
        class LanguageManager {
            constructor() {
                this.currentLang = this.detectLanguage();
                this.init();
            }

            detectLanguage() {
                // Check localStorage first
                const saved = localStorage.getItem('language');
                if (saved) return saved;

                // Check browser language
                const browserLang = navigator.language || navigator.userLanguage;
                if (browserLang.startsWith('zh')) return 'zh';
                return 'en';
            }

            init() {
                this.updatePageLanguage(this.currentLang);
                this.setupLanguageButtons();
            }

            setupLanguageButtons() {
                document.querySelectorAll('.lang-btn').forEach(btn => {
                    btn.addEventListener('click', () => {
                        const lang = btn.getAttribute('data-lang');
                        this.setLanguage(lang);
                    });
                    
                    if (btn.getAttribute('data-lang') === this.currentLang) {
                        btn.classList.add('active');
                    } else {
                        btn.classList.remove('active');
                    }
                });
            }

            setLanguage(lang) {
                this.currentLang = lang;
                localStorage.setItem('language', lang);
                this.updatePageLanguage(lang);
                this.setupLanguageButtons();
            }

            updatePageLanguage(lang) {
                const trans = translations[lang] || translations.en;
                
                // Update page title
                document.title = trans.page_title;
                
                // Update all elements with data-i18n attribute
                document.querySelectorAll('[data-i18n]').forEach(element => {
                    const key = element.getAttribute('data-i18n');
                    if (trans[key]) {
                        if (element.tagName === 'TITLE') {
                            element.textContent = trans[key];
                        } else {
                            element.textContent = trans[key];
                        }
                    }
                });
            }

            t(key) {
                const trans = translations[this.currentLang] || translations.en;
                return trans[key] || translations.en[key] || key;
            }
        }

        const langManager = new LanguageManager();

        // ==================== Original Script ====================
        const uploadZone = document.getElementById('uploadZone');
        const fileInput = document.getElementById('fileInput');
        const progressBar = document.getElementById('progressBar');
        const status = document.getElementById('status');
        const results = document.getElementById('results');
        const fileInfo = document.getElementById('fileInfo');
        const downloadBtn = document.getElementById('downloadBtn');
        const downloadMainBtn = document.getElementById('downloadMainBtn');
        const downloadExeBtn = document.getElementById('downloadExeBtn');
        const logsContainer = document.getElementById('logsContainer');
        const logsHeader = document.getElementById('logsHeader');
        const logsContent = document.getElementById('logsContent');
        const logsToggle = document.getElementById('logsToggle');

        let currentConversionId = null;
        let logsVisible = true;

        // Logs toggle functionality
        logsHeader.addEventListener('click', () => {
            logsVisible = !logsVisible;
            if (logsVisible) {
                logsContent.style.display = 'block';
                logsToggle.textContent = '‚ñº';
            } else {
                logsContent.style.display = 'none';
                logsToggle.textContent = '‚ñ∂';
            }
        });

        function getLogClass(logLine) {
            if (logLine.includes('[INFO]')) return 'info';
            if (logLine.includes('[SUCCESS]')) return 'success';
            if (logLine.includes('[ERROR]')) return 'error';
            if (logLine.includes('[WARNING]')) return 'warning';
            if (logLine.includes('[EXCEPTION]')) return 'exception';
            if (logLine.includes('[START]')) return 'start';
            if (logLine.includes('[FINAL]')) return 'final';
            if (logLine.includes('[METRICS]')) return 'metrics';
            return 'info';
        }

        function displayLogs(logs) {
            if (!logs || logs.length === 0) {
                logsContainer.style.display = 'none';
                return;
            }

            logsContent.innerHTML = '';
            logs.forEach(log => {
                const logDiv = document.createElement('div');
                logDiv.className = `log-line ${getLogClass(log)}`;
                logDiv.textContent = log;
                logsContent.appendChild(logDiv);
            });

            logsContainer.style.display = 'block';
            // Auto scroll to bottom
            logsContent.scrollTop = logsContent.scrollHeight;
        }

        // Upload zone click handler
        uploadZone.addEventListener('click', () => {
            fileInput.click();
        });

        // Drag and drop handlers
        uploadZone.addEventListener('dragover', (e) => {
            e.preventDefault();
            uploadZone.classList.add('dragover');
        });

        uploadZone.addEventListener('dragleave', () => {
            uploadZone.classList.remove('dragover');
        });

        uploadZone.addEventListener('drop', (e) => {
            e.preventDefault();
            uploadZone.classList.remove('dragover');
            const files = e.dataTransfer.files;
            if (files.length > 0) {
                handleFile(files[0]);
            }
        });

        // File input change handler
        fileInput.addEventListener('change', (e) => {
            if (e.target.files.length > 0) {
                handleFile(e.target.files[0]);
            }
        });

        function showStatus(message, type = 'info') {
            status.textContent = message;
            status.className = `status ${type}`;
            status.style.display = 'block';
        }

        function hideStatus() {
            status.style.display = 'none';
        }

        function showProgress() {
            progressBar.style.display = 'block';
        }

        function hideProgress() {
            progressBar.style.display = 'none';
        }

        function showFileInfo(file) {
            document.getElementById('fileName').textContent = file.name;
            const sizeText = langManager.t('file_size_text');
            const typeText = langManager.t('file_type_text');
            const modelTypeText = langManager.t('onnx_model');
            document.getElementById('fileDetails').textContent = 
                `${sizeText} ${(file.size / 1024 / 1024).toFixed(2)} MB | ${typeText} ${file.type || modelTypeText}`;
            fileInfo.style.display = 'block';
        }

        function updateResults(data) {
            // Display execution logs if available
            if (data.execution_logs) {
                displayLogs(data.execution_logs);
            }
            
            // Setup download button
            downloadBtn.href = `/download/${data.conversion_id}`;
            downloadBtn.style.display = 'inline-block';
            
            // Setup download main file button
            downloadMainBtn.href = `/download/${data.conversion_id}/main`;
            downloadMainBtn.style.display = 'inline-block';
            
            // Setup download executable button
            downloadExeBtn.href = `/download/${data.conversion_id}/executable`;
            downloadExeBtn.style.display = 'inline-block';
            
            // Add view report button
            const reportBtn = document.createElement('a');
            reportBtn.href = `/report/${data.conversion_id}`;
            reportBtn.className = 'btn btn-secondary';
            reportBtn.style.marginLeft = '10px';
            reportBtn.innerHTML = langManager.t('view_report');
            reportBtn.target = '_blank';
            
            // Remove existing report button if any
            const existingReportBtn = document.querySelector('a[href*="/report/"]');
            if (existingReportBtn) {
                existingReportBtn.remove();
            }
            
            downloadBtn.parentNode.appendChild(reportBtn);
            
            // Update validation status and metrics
            if (data.validation) {
                const validation = data.validation;
                let statusText = '';
                let statusClass = '';
                
                switch (validation.status) {
                    case 'success':
                        statusText = `‚úÖ È™åËØÅÊàêÂäü: ${validation.message}`;
                        statusClass = 'success';
                        break;
                    case 'failed':
                        statusText = `‚ùå È™åËØÅÂ§±Ë¥•: ${validation.message}`;
                        statusClass = 'error';
                        break;
                    case 'error':
                        statusText = `‚ö†Ô∏è È™åËØÅÈîôËØØ: ${validation.message}`;
                        statusClass = 'error';
                        break;
                    case 'skipped':
                        statusText = `‚è≠Ô∏è È™åËØÅË∑≥Ëøá: ${validation.message}`;
                        statusClass = 'info';
                        break;
                    default:
                        statusText = `‚ÑπÔ∏è ${validation.message}`;
                        statusClass = 'info';
                }
                
                showStatus(statusText, statusClass);
                
                // Show metrics if available
                if (validation.metrics && validation.metrics.overall_metrics) {
                    const metrics = validation.metrics.overall_metrics;
                    document.getElementById('avgRelError').textContent = metrics.avg_relative_error.toExponential(2);
                    document.getElementById('maxRelError').textContent = metrics.max_relative_error.toExponential(2);
                    document.getElementById('mae').textContent = metrics.mae.toExponential(2);
                    document.getElementById('maxAbsError').textContent = metrics.max_absolute_error.toExponential(2);
                    document.getElementById('mse').textContent = metrics.mse.toExponential(2);
                    document.getElementById('numSamples').textContent = `${metrics.num_samples} (${metrics.num_elements} elements)`;
                    
                    results.style.display = 'block';
                } else {
                    results.style.display = 'none';
                }
            } else {
                // Fallback for old format
                if (data.metrics) {
                    const metrics = data.metrics;
                    document.getElementById('avgRelError').textContent = metrics.avg_relative_error.toFixed(8);
                    document.getElementById('maxRelError').textContent = metrics.max_relative_error.toFixed(8);
                    document.getElementById('mae').textContent = metrics.mae.toFixed(8);
                    document.getElementById('maxAbsError').textContent = metrics.max_absolute_error.toFixed(8);
                    document.getElementById('mse').textContent = metrics.mse.toFixed(8);
                    document.getElementById('numSamples').textContent = metrics.num_samples;
                    
                    results.style.display = 'block';
                    showStatus(langManager.t('conversion_success'), 'success');
                } else {
                    results.style.display = 'none';
                    showStatus(langManager.t('conversion_success'), 'info');
                }
            }
        }

        async function handleFile(file) {
            if (!file.name.endsWith('.onnx')) {
                showStatus(langManager.t('file_error'), 'error');
                return;
            }

            showFileInfo(file);
            showProgress();
            showStatus(langManager.t('converting'), 'info');
            results.style.display = 'none';
            downloadBtn.style.display = 'none';
            downloadMainBtn.style.display = 'none';
            downloadExeBtn.style.display = 'none';
            logsContainer.style.display = 'none'; // Hide logs initially

            const formData = new FormData();
            formData.append('file', file);

            try {
                const response = await fetch('/upload', {
                    method: 'POST',
                    body: formData
                });

                const data = await response.json();

                if (data.error) {
                    // Display logs if available even for errors
                    if (data.logs) {
                        displayLogs(data.logs);
                    }
                    showStatus(`${langManager.t('conversion_failed')} ${data.error}`, 'error');
                } else {
                    currentConversionId = data.conversion_id;
                    updateResults(data);
                }
            } catch (error) {
                showStatus(`${langManager.t('request_error')} ${error.message}`, 'error');
            } finally {
                hideProgress();
            }
        }

        // Add some visual feedback
        document.querySelectorAll('.btn').forEach(btn => {
            btn.addEventListener('mousedown', () => {
                btn.style.transform = 'translateY(1px)';
            });
            
            btn.addEventListener('mouseup', () => {
                btn.style.transform = 'translateY(-2px)';
            });
        });
    </script>
</body>
</html>